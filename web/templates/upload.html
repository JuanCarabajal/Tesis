{% extends "base.html" %}

{% block content %}
<section class="rounded-2xl border border-white/10 bg-gradient-to-b from-zinc-950 to-zinc-900 p-6 md:p-10">
  <div class="mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
    <div>
      <h1 class="text-2xl font-semibold">Sube tu demo de Mirage</h1>
      <p class="mt-1 text-sm text-zinc-400">Selecciona un archivo <code>.dem</code> para analizar.</p>
    </div>
    <span class="rounded-full bg-sky-500/10 px-3 py-1 text-xs text-sky-300 ring-1 ring-sky-400/20 self-start md:self-auto">
      Tesis MVP – Mirage
    </span>
  </div>

  <form id="uploadForm" method="POST" action="{{ url_for('upload') }}" enctype="multipart/form-data" class="grid gap-6">
    <div class="rounded-2xl border border-white/10 p-5 space-y-3">
      <div class="text-sm font-medium text-zinc-300">Subir .dem</div>
      <div class="flex flex-col sm:flex-row sm:items-center gap-3">
        <input id="demInput" name="demo_file" type="file" accept=".dem" required
               class="w-full rounded-xl border border-white/10 bg-zinc-950 px-3 py-2 text-sm file:mr-3 file:rounded-lg file:border-0 file:bg-white/10 file:px-3 file:py-2 file:text-white">
        <button id="analyzeBtn" type="submit"
                class="rounded-2xl bg-sky-500 px-5 py-2 text-sm font-medium text-white shadow-lg shadow-sky-500/20 hover:bg-sky-400">
          Analizar .dem
        </button>
      </div>
      <p class="mt-1 text-xs text-zinc-500">Tamaño típico 50–300 MB.</p>
    </div>
  </form>
</section>

<!-- Overlay -->
<div id="overlay" class="fixed inset-0 z-50 hidden place-items-center bg-black/70 backdrop-blur-sm">
  <div class="w-[min(92vw,520px)] rounded-2xl bg-zinc-950 p-6 ring-1 ring-white/10">
    <div class="mb-2 text-sm text-zinc-400">Analizando demo…</div>
    <div class="mb-4 h-2 w-full overflow-hidden rounded-full bg-zinc-800">
      <div id="bar" class="h-full bg-violet-500 transition-all" style="width:0%"></div>
    </div>
    <div id="step" class="text-sm text-zinc-300">Preparando…</div>
  </div>
</div>
{% endblock %}
